\doxysection{main\+\_\+viewer.\+c}
\hypertarget{main__viewer_8c_source}{}\label{main__viewer_8c_source}\index{viewer/main\_viewer.c@{viewer/main\_viewer.c}}
\mbox{\hyperlink{main__viewer_8c}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00001}00001\ }
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00007}00007\ }
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00008}00008\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{main__viewer_8h}{main\_viewer.h}}"{}}}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00009}00009\ }
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00010}00010\ }
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00015}\mbox{\hyperlink{main__viewer_8c_abc2d65781e12ab4e21fdba0fe5ace221}{00015}}\ \textcolor{preprocessor}{\#define\ MENU\_SCROLL\_SPEED\ 1}}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00016}00016\ }
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00021}\mbox{\hyperlink{main__viewer_8c_aaa69f89df4c8e47abeb574bfdd11d9f4}{00021}}\ \textcolor{preprocessor}{\#define\ ANIMATION\_SPEED\ 8}}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00022}00022\ }
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00023}\mbox{\hyperlink{main__viewer_8c_a3911ce6a78022d84028d73516445ec0a}{00023}}\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{main__viewer_8c_a3911ce6a78022d84028d73516445ec0a}{menu\_scroll\_offset}}\ =\ 0;\ }
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00024}00024\ }
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00025}\mbox{\hyperlink{main__viewer_8c_a8fb9de233d418280db226d85267843d7}{00025}}\ int\ (\mbox{\hyperlink{main__viewer_8c_a8fb9de233d418280db226d85267843d7}{draw\_arena}})(\mbox{\hyperlink{structarena}{arena}}*\ \mbox{\hyperlink{structarena}{arena}})\ \{}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00026}00026\ \ \ \textcolor{comment}{//draw\ the\ visible\ section\ of\ the\ arena}}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00027}00027\ \ \ \mbox{\hyperlink{graphics_8c_a348a68eba0696f535bad8d8cf3ea5219}{vg\_draw\_image\_section32}}(0,\ 0,\ \mbox{\hyperlink{structarena}{arena}}-\/>\mbox{\hyperlink{structarena_a76f2cb533432223bcf4343888b95ace9}{background\_image}},\ \mbox{\hyperlink{structarena}{arena}}-\/>\mbox{\hyperlink{structarena_a71b5aa321c1ab05450cb75adcc73b7be}{pos\_x}},\ \mbox{\hyperlink{structarena}{arena}}-\/>\mbox{\hyperlink{structarena_afe0f418f8b2cee466b080bca771aa483}{pos\_y}},\ \mbox{\hyperlink{graphics_8c_aa4a211ebfc5c87a0072eaf9bd03e3a56}{vg\_get\_hres}}(),\ \mbox{\hyperlink{graphics_8c_a4633499e0f197ac855f56473fc9fb291}{vg\_get\_vres}}());}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00028}00028\ }
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00029}00029\ \ \ \textcolor{comment}{//\ Draw\ all\ active\ enemies}}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00030}00030\ \ \ \mbox{\hyperlink{main__viewer_8c_ab9224b41675f9b0d9087a328239cf392}{draw\_enemies}}(\mbox{\hyperlink{structarena}{arena}});}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00031}00031\ }
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00032}00032\ \ \ \textcolor{comment}{//draw\ the\ player}}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00033}00033\ \ \ \mbox{\hyperlink{structanimation}{animation}}\ \mbox{\hyperlink{structanimation}{animation}}\ =\ \mbox{\hyperlink{structarena}{arena}}-\/>\mbox{\hyperlink{structarena_ae6ddf0232f587e3d173c340f73d35d76}{player}}-\/>\mbox{\hyperlink{structentity_aeca0a50f0dc020316ed983d8f1eb2c07}{animations}}[\mbox{\hyperlink{animations_8c_abaaf2b3c11b75d1f92a8133dbe74b5eb}{entity\_get\_direction}}(\mbox{\hyperlink{structarena}{arena}}-\/>\mbox{\hyperlink{structarena_ae6ddf0232f587e3d173c340f73d35d76}{player}})];}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00034}00034\ \ \ \mbox{\hyperlink{graphics_8c_a75992379c4d2d7db98670d5fd3cee7aa}{vg\_draw\_image32}}(\mbox{\hyperlink{structarena}{arena}}-\/>\mbox{\hyperlink{structarena_ae6ddf0232f587e3d173c340f73d35d76}{player}}-\/>\mbox{\hyperlink{structentity_a71b5aa321c1ab05450cb75adcc73b7be}{pos\_x}}\ -\/\ \mbox{\hyperlink{structarena}{arena}}-\/>\mbox{\hyperlink{structarena_a71b5aa321c1ab05450cb75adcc73b7be}{pos\_x}},\ \mbox{\hyperlink{structarena}{arena}}-\/>\mbox{\hyperlink{structarena_ae6ddf0232f587e3d173c340f73d35d76}{player}}-\/>\mbox{\hyperlink{structentity_afe0f418f8b2cee466b080bca771aa483}{pos\_y}}\ -\/\ \mbox{\hyperlink{structarena}{arena}}-\/>\mbox{\hyperlink{structarena_afe0f418f8b2cee466b080bca771aa483}{pos\_y}},\ \mbox{\hyperlink{structanimation}{animation}}.\mbox{\hyperlink{structanimation_a502f1077adb8d0ca4a8023ff2377f797}{sprites}}[(\mbox{\hyperlink{main__controller_8c_acba08ec4cb0918b5418a0d44bfc37768}{get\_current\_frame}}()\%(\mbox{\hyperlink{structanimation}{animation}}.\mbox{\hyperlink{structanimation_a031ba2d5ce93d4fff165c7dece0b56c3}{n\_frames}}\ *\ \mbox{\hyperlink{main__viewer_8c_aaa69f89df4c8e47abeb574bfdd11d9f4}{ANIMATION\_SPEED}}))/\mbox{\hyperlink{main__viewer_8c_aaa69f89df4c8e47abeb574bfdd11d9f4}{ANIMATION\_SPEED}}]);}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00035}00035\ }
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00036}00036\ \ \ \textcolor{comment}{//\ Draw\ all\ active\ attacks}}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00037}00037\ \ \ \mbox{\hyperlink{main__viewer_8c_ae2bdbd08eebca29ff9cb8876f0216da7}{draw\_attacks}}(\mbox{\hyperlink{structarena}{arena}});}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00038}00038\ }
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00039}00039\ \ \ \textcolor{comment}{//\ Draw\ all\ active\ hearts}}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00040}00040\ \ \ \mbox{\hyperlink{main__viewer_8c_a7aee3dbe4695d85b1944bae28d0dd97d}{draw\_hearts}}(\mbox{\hyperlink{structarena}{arena}});}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00041}00041\ }
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00042}00042\ \ \ \textcolor{comment}{//draw\ the\ mouse}}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00043}00043\ \ \ \mbox{\hyperlink{graphics_8c_a75992379c4d2d7db98670d5fd3cee7aa}{vg\_draw\_image32}}(\mbox{\hyperlink{structarena}{arena}}-\/>\mbox{\hyperlink{structarena_ab92e02356cd036a7927f70cf5f79261c}{mouse}}-\/>\mbox{\hyperlink{structentity_a71b5aa321c1ab05450cb75adcc73b7be}{pos\_x}},\ \mbox{\hyperlink{structarena}{arena}}-\/>\mbox{\hyperlink{structarena_ab92e02356cd036a7927f70cf5f79261c}{mouse}}-\/>\mbox{\hyperlink{structentity_afe0f418f8b2cee466b080bca771aa483}{pos\_y}},\ \&\mbox{\hyperlink{static__images_8c_a8f0dd96f5b3c20e5c5fa90664a76af15}{cursor\_img}});}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00044}00044\ \ \ }
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00045}00045\ \ \ \textcolor{comment}{//\ Get\ health\ bar\ image\ based\ on\ player's\ health\ (0-\/4)}}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00046}00046\ \ \ \textcolor{keywordtype}{int}\ health\_status\ =\ \mbox{\hyperlink{structarena}{arena}}-\/>\mbox{\hyperlink{structarena_ae6ddf0232f587e3d173c340f73d35d76}{player}}-\/>\mbox{\hyperlink{structentity_ae0d82ac801c5f9f53bcdc1e4c95896ef}{health}};}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00047}00047\ }
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00048}00048\ \ \ \mbox{\hyperlink{graphics_8c_a75992379c4d2d7db98670d5fd3cee7aa}{vg\_draw\_image32}}(10,\ \mbox{\hyperlink{graphics_8c_a4633499e0f197ac855f56473fc9fb291}{vg\_get\_vres}}()\ -\/\ \mbox{\hyperlink{static__images_8c_a454cfb57acef7dde28523b93924db041}{health\_bars}}[health\_status].height\ -\/\ 10,\ \&(\mbox{\hyperlink{static__images_8c_a454cfb57acef7dde28523b93924db041}{health\_bars}}[health\_status]));}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00049}00049\ }
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00050}00050\ \ \ \textcolor{comment}{//draw\ the\ mouse}}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00051}00051\ \ \ \mbox{\hyperlink{graphics_8c_a75992379c4d2d7db98670d5fd3cee7aa}{vg\_draw\_image32}}(\mbox{\hyperlink{structarena}{arena}}-\/>\mbox{\hyperlink{structarena_ab92e02356cd036a7927f70cf5f79261c}{mouse}}-\/>\mbox{\hyperlink{structentity_a71b5aa321c1ab05450cb75adcc73b7be}{pos\_x}},\ \mbox{\hyperlink{structarena}{arena}}-\/>\mbox{\hyperlink{structarena_ab92e02356cd036a7927f70cf5f79261c}{mouse}}-\/>\mbox{\hyperlink{structentity_afe0f418f8b2cee466b080bca771aa483}{pos\_y}},\ \&\mbox{\hyperlink{static__images_8c_a8f0dd96f5b3c20e5c5fa90664a76af15}{cursor\_img}});}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00052}00052\ }
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00053}00053\ \ \ \textcolor{comment}{//\ Draw\ timer\ in\ mins:seconds\ format}}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00054}00054\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ time\ =\ \mbox{\hyperlink{arena__controller_8c_a7320cd4f275ec44ece5cbaf1204b381f}{get\_arena\_game\_time}}();}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00055}00055\ \ \ \textcolor{keywordtype}{int}\ minutes\ =\ time\ /\ 60;}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00056}00056\ \ \ \textcolor{keywordtype}{int}\ seconds\ =\ time\ \%\ 60;}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00057}00057\ \ \ }
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00058}00058\ \ \ \textcolor{comment}{//\ Draw\ minutes}}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00059}00059\ \ \ \textcolor{comment}{//\ Pos\ (10,10)}}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00060}00060\ \ \ \mbox{\hyperlink{graphics_8c_a75992379c4d2d7db98670d5fd3cee7aa}{vg\_draw\_image32}}(10,\ 10,\ \&\mbox{\hyperlink{static__images_8c_a4f1167c1447e51cbbeb74999c2d2deb2}{number\_sprites}}[minutes\ /\ 10]);}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00061}00061\ \ \ \textcolor{comment}{//\ Pos\ (10\ +\ sprite\ width,\ 10)}}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00062}00062\ \ \ \mbox{\hyperlink{graphics_8c_a75992379c4d2d7db98670d5fd3cee7aa}{vg\_draw\_image32}}(10\ +\ \mbox{\hyperlink{static__images_8c_a4f1167c1447e51cbbeb74999c2d2deb2}{number\_sprites}}[0].width,\ 10,\ \&\mbox{\hyperlink{static__images_8c_a4f1167c1447e51cbbeb74999c2d2deb2}{number\_sprites}}[minutes\ \%\ 10]);}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00063}00063\ \ \ }
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00064}00064\ \ \ \textcolor{comment}{//\ Draw\ the\ "{}:"{}\ |\ Pos\ (10\ +\ numberSpriteWidth*2,\ 10)}}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00065}00065\ \ \ \mbox{\hyperlink{graphics_8c_a75992379c4d2d7db98670d5fd3cee7aa}{vg\_draw\_image32}}(10\ +\ \mbox{\hyperlink{static__images_8c_a4f1167c1447e51cbbeb74999c2d2deb2}{number\_sprites}}[0].width\ *\ 2,\ 10,\ \&\mbox{\hyperlink{static__images_8c_ae6e4bac9d2ef5599afcb5371a5413a01}{two\_points}});\ }
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00066}00066\ \ \ }
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00067}00067\ \ \ \textcolor{comment}{//\ Draw\ seconds}}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00068}00068\ \ \ \textcolor{comment}{//\ Pos\ (sprite\ width*3,\ 10)}}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00069}00069\ \ \ \mbox{\hyperlink{graphics_8c_a75992379c4d2d7db98670d5fd3cee7aa}{vg\_draw\_image32}}(\mbox{\hyperlink{static__images_8c_a4f1167c1447e51cbbeb74999c2d2deb2}{number\_sprites}}[0].width\ *\ 3,\ 10,\ \&\mbox{\hyperlink{static__images_8c_a4f1167c1447e51cbbeb74999c2d2deb2}{number\_sprites}}[seconds\ /\ 10]);}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00070}00070\ \ \ \textcolor{comment}{//\ Pos\ (sprite\ width*4,\ 10)}}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00071}00071\ \ \ \mbox{\hyperlink{graphics_8c_a75992379c4d2d7db98670d5fd3cee7aa}{vg\_draw\_image32}}(\mbox{\hyperlink{static__images_8c_a4f1167c1447e51cbbeb74999c2d2deb2}{number\_sprites}}[0].width\ *\ 4,\ 10,\ \&\mbox{\hyperlink{static__images_8c_a4f1167c1447e51cbbeb74999c2d2deb2}{number\_sprites}}[seconds\ \%\ 10]);}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00072}00072\ \ \ }
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00073}00073\ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00074}00074\ \}}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00075}00075\ }
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00076}00076\ \textcolor{comment}{//\ Draw\ all\ active\ enemies}}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00077}\mbox{\hyperlink{main__viewer_8c_ab9224b41675f9b0d9087a328239cf392}{00077}}\ int\ (\mbox{\hyperlink{main__viewer_8c_ab9224b41675f9b0d9087a328239cf392}{draw\_enemies}})(\mbox{\hyperlink{structarena}{arena}}*\ \mbox{\hyperlink{structarena}{arena}})\ \{}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00078}00078\ \ \ \mbox{\hyperlink{structentity__node}{entity\_node}}*\ current\_enemy\ =\ \mbox{\hyperlink{structarena}{arena}}-\/>\mbox{\hyperlink{structarena_adb8106abeff3aa4425d8044b5cfab5ce}{enemies}};}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00079}00079\ \ \ \textcolor{keywordflow}{while}(current\_enemy\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00080}00080\ \ \ \ \ \textcolor{comment}{//\ Get\ the\ current\ animation\ based\ on\ the\ enemy's\ direction}}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00081}00081\ \ \ \ \ \mbox{\hyperlink{structentity}{entity}}*\ enemy\ =\ current\_enemy-\/>entity;}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00082}00082\ \ \ \ \ \mbox{\hyperlink{structanimation}{animation}}\ \mbox{\hyperlink{structanimation}{animation}}\ =\ enemy-\/>\mbox{\hyperlink{structentity_aeca0a50f0dc020316ed983d8f1eb2c07}{animations}}[\mbox{\hyperlink{animations_8c_abaaf2b3c11b75d1f92a8133dbe74b5eb}{entity\_get\_direction}}(enemy)];}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00083}00083\ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00084}00084\ \ \ \ \ \textcolor{comment}{//\ Draw\ the\ enemy\ relative\ to\ the\ arena's\ position}}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00085}00085\ \ \ \ \ \mbox{\hyperlink{graphics_8c_a75992379c4d2d7db98670d5fd3cee7aa}{vg\_draw\_image32}}(}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00086}00086\ \ \ \ \ \ \ \ \ enemy-\/>\mbox{\hyperlink{structentity_a71b5aa321c1ab05450cb75adcc73b7be}{pos\_x}}\ -\/\ \mbox{\hyperlink{structarena}{arena}}-\/>\mbox{\hyperlink{structarena_a71b5aa321c1ab05450cb75adcc73b7be}{pos\_x}},}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00087}00087\ \ \ \ \ \ \ \ \ enemy-\/>\mbox{\hyperlink{structentity_afe0f418f8b2cee466b080bca771aa483}{pos\_y}}\ -\/\ \mbox{\hyperlink{structarena}{arena}}-\/>\mbox{\hyperlink{structarena_afe0f418f8b2cee466b080bca771aa483}{pos\_y}},}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00088}00088\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structanimation}{animation}}.\mbox{\hyperlink{structanimation_a502f1077adb8d0ca4a8023ff2377f797}{sprites}}[(\mbox{\hyperlink{main__controller_8c_acba08ec4cb0918b5418a0d44bfc37768}{get\_current\_frame}}()\ \%\ (\mbox{\hyperlink{structanimation}{animation}}.\mbox{\hyperlink{structanimation_a031ba2d5ce93d4fff165c7dece0b56c3}{n\_frames}}\ *\ \mbox{\hyperlink{main__viewer_8c_aaa69f89df4c8e47abeb574bfdd11d9f4}{ANIMATION\_SPEED}}))\ /\ \mbox{\hyperlink{main__viewer_8c_aaa69f89df4c8e47abeb574bfdd11d9f4}{ANIMATION\_SPEED}}]}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00089}00089\ \ \ \ \ );}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00090}00090\ }
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00091}00091\ \ \ \ \ current\_enemy\ =\ current\_enemy-\/>next\_entity;}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00092}00092\ \ \ \}}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00093}00093\ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00094}00094\ \}}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00095}00095\ }
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00096}00096\ }
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00097}\mbox{\hyperlink{main__viewer_8c_ae2bdbd08eebca29ff9cb8876f0216da7}{00097}}\ int\ (\mbox{\hyperlink{main__viewer_8c_ae2bdbd08eebca29ff9cb8876f0216da7}{draw\_attacks}})(\mbox{\hyperlink{structarena}{arena}}*\ \mbox{\hyperlink{structarena}{arena}})\ \{}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00098}00098\ \ \ \mbox{\hyperlink{structattack__node}{attack\_node}}*\ current\_attack\ =\ \mbox{\hyperlink{structarena}{arena}}-\/>\mbox{\hyperlink{structarena_a7b9192833509ce7b56005e2cf3eb65d5}{player\_attacks}};}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00099}00099\ \ \ \textcolor{keywordflow}{while}(current\_attack\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00100}00100\ \ \ \ \ \mbox{\hyperlink{structattack}{attack}}*\ \mbox{\hyperlink{structattack}{attack}}\ =\ current\_attack-\/>attack;}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00101}00101\ \ \ \ \ \mbox{\hyperlink{structanimation}{animation}}\ \mbox{\hyperlink{structanimation}{animation}}\ =\ \mbox{\hyperlink{structattack}{attack}}-\/>\mbox{\hyperlink{structattack_acc46c4b2a2894560155e302098f62e3d}{animation}};}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00102}00102\ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00103}00103\ \ \ \ \ \mbox{\hyperlink{graphics_8c_a75992379c4d2d7db98670d5fd3cee7aa}{vg\_draw\_image32}}(}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00104}00104\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structattack}{attack}}-\/>\mbox{\hyperlink{structattack_a71b5aa321c1ab05450cb75adcc73b7be}{pos\_x}}\ -\/\ \mbox{\hyperlink{structarena}{arena}}-\/>\mbox{\hyperlink{structarena_a71b5aa321c1ab05450cb75adcc73b7be}{pos\_x}},}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00105}00105\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structattack}{attack}}-\/>\mbox{\hyperlink{structattack_afe0f418f8b2cee466b080bca771aa483}{pos\_y}}\ -\/\ \mbox{\hyperlink{structarena}{arena}}-\/>\mbox{\hyperlink{structarena_afe0f418f8b2cee466b080bca771aa483}{pos\_y}},}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00106}00106\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structanimation}{animation}}.\mbox{\hyperlink{structanimation_a502f1077adb8d0ca4a8023ff2377f797}{sprites}}[\mbox{\hyperlink{structanimation}{animation}}.\mbox{\hyperlink{structanimation_a031ba2d5ce93d4fff165c7dece0b56c3}{n\_frames}}\ -\/\ 1\ -\/\ ((\mbox{\hyperlink{structattack}{attack}}-\/>\mbox{\hyperlink{structattack_a40463b645a8340db77d51cbbacf2a9ee}{frames}}\ \%\ (\mbox{\hyperlink{structanimation}{animation}}.\mbox{\hyperlink{structanimation_a031ba2d5ce93d4fff165c7dece0b56c3}{n\_frames}}\ *\ \mbox{\hyperlink{main__viewer_8c_aaa69f89df4c8e47abeb574bfdd11d9f4}{ANIMATION\_SPEED}}))\ \ /\ \mbox{\hyperlink{main__viewer_8c_aaa69f89df4c8e47abeb574bfdd11d9f4}{ANIMATION\_SPEED}})]}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00107}00107\ \ \ \ \ );}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00108}00108\ }
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00109}00109\ \ \ \ \ current\_attack\ =\ current\_attack-\/>next\_attack;}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00110}00110\ \ \ \}}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00111}00111\ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00112}00112\ \}}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00113}00113\ }
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00114}\mbox{\hyperlink{main__viewer_8c_a7aee3dbe4695d85b1944bae28d0dd97d}{00114}}\ int\ (\mbox{\hyperlink{main__viewer_8c_a7aee3dbe4695d85b1944bae28d0dd97d}{draw\_hearts}})(\mbox{\hyperlink{structarena}{arena}}*\ \mbox{\hyperlink{structarena}{arena}})\ \{}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00115}00115\ \ \ \mbox{\hyperlink{structentity__node}{entity\_node}}*\ current\_heart\ =\ \mbox{\hyperlink{structarena}{arena}}-\/>\mbox{\hyperlink{structarena_a3a65af53fd8ed22c0c0f410d278a7698}{hearts}};}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00116}00116\ \ \ \textcolor{keywordflow}{while}(current\_heart\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00117}00117\ \ \ \ \ \mbox{\hyperlink{structentity}{entity}}*\ heart\ =\ current\_heart-\/>entity;}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00118}00118\ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00119}00119\ \ \ \ \ \textcolor{comment}{//\ Draw\ the\ heart\ relative\ to\ the\ arena's\ position}}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00120}00120\ \ \ \ \ \mbox{\hyperlink{graphics_8c_a75992379c4d2d7db98670d5fd3cee7aa}{vg\_draw\_image32}}(}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00121}00121\ \ \ \ \ \ \ \ \ heart-\/>\mbox{\hyperlink{structentity_a71b5aa321c1ab05450cb75adcc73b7be}{pos\_x}}\ -\/\ \mbox{\hyperlink{structarena}{arena}}-\/>\mbox{\hyperlink{structarena_a71b5aa321c1ab05450cb75adcc73b7be}{pos\_x}},}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00122}00122\ \ \ \ \ \ \ \ \ heart-\/>\mbox{\hyperlink{structentity_afe0f418f8b2cee466b080bca771aa483}{pos\_y}}\ -\/\ \mbox{\hyperlink{structarena}{arena}}-\/>\mbox{\hyperlink{structarena_afe0f418f8b2cee466b080bca771aa483}{pos\_y}},}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00123}00123\ \ \ \ \ \ \ \ \ heart-\/>\mbox{\hyperlink{structentity_aeca0a50f0dc020316ed983d8f1eb2c07}{animations}}[0].\mbox{\hyperlink{structanimation_a502f1077adb8d0ca4a8023ff2377f797}{sprites}}[(\mbox{\hyperlink{main__controller_8c_acba08ec4cb0918b5418a0d44bfc37768}{get\_current\_frame}}()\ \%\ (heart-\/>\mbox{\hyperlink{structentity_aeca0a50f0dc020316ed983d8f1eb2c07}{animations}}[0].\mbox{\hyperlink{structanimation_a031ba2d5ce93d4fff165c7dece0b56c3}{n\_frames}}\ *\ \mbox{\hyperlink{main__viewer_8c_aaa69f89df4c8e47abeb574bfdd11d9f4}{ANIMATION\_SPEED}}))\ /\ \mbox{\hyperlink{main__viewer_8c_aaa69f89df4c8e47abeb574bfdd11d9f4}{ANIMATION\_SPEED}}]}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00124}00124\ \ \ \ \ );}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00125}00125\ }
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00126}00126\ \ \ \ \ current\_heart\ =\ current\_heart-\/>next\_entity;}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00127}00127\ \ \ \}}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00128}00128\ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00129}00129\ \}}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00130}00130\ }
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00131}\mbox{\hyperlink{main__viewer_8c_ae29a8a282b383470a1ec0477b2770b10}{00131}}\ int\ (\mbox{\hyperlink{main__viewer_8c_ae29a8a282b383470a1ec0477b2770b10}{draw\_menu}})(\mbox{\hyperlink{structmenu}{menu}}*\ \mbox{\hyperlink{structmenu}{menu}})\{}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00132}00132\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{structmenu}{menu}}-\/>\mbox{\hyperlink{structmenu_a76f2cb533432223bcf4343888b95ace9}{background\_image}}\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00133}00133\ \ \ \ \ \textcolor{keywordtype}{int}\ bg\_width\ =\ \mbox{\hyperlink{structmenu}{menu}}-\/>\mbox{\hyperlink{structmenu_a76f2cb533432223bcf4343888b95ace9}{background\_image}}-\/>width;}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00134}00134\ }
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00135}00135\ \ \ \ \ \textcolor{comment}{//\ horizontal\ endless\ scrolling}}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00136}00136\ \ \ \ \ \mbox{\hyperlink{main__viewer_8c_a3911ce6a78022d84028d73516445ec0a}{menu\_scroll\_offset}}\ =\ (\mbox{\hyperlink{main__viewer_8c_a3911ce6a78022d84028d73516445ec0a}{menu\_scroll\_offset}}\ +\ \mbox{\hyperlink{main__viewer_8c_abc2d65781e12ab4e21fdba0fe5ace221}{MENU\_SCROLL\_SPEED}})\ \%\ bg\_width;}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00137}00137\ }
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00138}00138\ \ \ \ \ uint32\_t\ remaining\_width\ =\ bg\_width\ -\/\ \mbox{\hyperlink{main__viewer_8c_a3911ce6a78022d84028d73516445ec0a}{menu\_scroll\_offset}};}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00139}00139\ }
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00140}00140\ \ \ \ \ \textcolor{keywordflow}{if}\ (remaining\_width\ >=\ \mbox{\hyperlink{graphics_8c_aa4a211ebfc5c87a0072eaf9bd03e3a56}{vg\_get\_hres}}())\ \{}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00141}00141\ \ \ \ \ \ \ \mbox{\hyperlink{graphics_8c_a348a68eba0696f535bad8d8cf3ea5219}{vg\_draw\_image\_section32}}(0,\ 0,\ \mbox{\hyperlink{structmenu}{menu}}-\/>\mbox{\hyperlink{structmenu_a76f2cb533432223bcf4343888b95ace9}{background\_image}},\ \mbox{\hyperlink{main__viewer_8c_a3911ce6a78022d84028d73516445ec0a}{menu\_scroll\_offset}},\ 0,\ \mbox{\hyperlink{graphics_8c_aa4a211ebfc5c87a0072eaf9bd03e3a56}{vg\_get\_hres}}(),\ \mbox{\hyperlink{graphics_8c_a4633499e0f197ac855f56473fc9fb291}{vg\_get\_vres}}());}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00142}00142\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00143}00143\ \ \ \ \ \ \ \textcolor{comment}{//\ final\ +\ start\ (wrap-\/around)}}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00144}00144\ \ \ \ \ \ \ \mbox{\hyperlink{graphics_8c_a348a68eba0696f535bad8d8cf3ea5219}{vg\_draw\_image\_section32}}(0,\ 0,\ \mbox{\hyperlink{structmenu}{menu}}-\/>\mbox{\hyperlink{structmenu_a76f2cb533432223bcf4343888b95ace9}{background\_image}},\ \mbox{\hyperlink{main__viewer_8c_a3911ce6a78022d84028d73516445ec0a}{menu\_scroll\_offset}},\ 0,\ remaining\_width,\ \mbox{\hyperlink{graphics_8c_a4633499e0f197ac855f56473fc9fb291}{vg\_get\_vres}}());}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00145}00145\ \ \ \ \ \ \ \mbox{\hyperlink{graphics_8c_a348a68eba0696f535bad8d8cf3ea5219}{vg\_draw\_image\_section32}}(remaining\_width,\ 0,\ \mbox{\hyperlink{structmenu}{menu}}-\/>\mbox{\hyperlink{structmenu_a76f2cb533432223bcf4343888b95ace9}{background\_image}},\ 0,\ 0,\ \mbox{\hyperlink{graphics_8c_aa4a211ebfc5c87a0072eaf9bd03e3a56}{vg\_get\_hres}}()\ -\/\ remaining\_width,\ \mbox{\hyperlink{graphics_8c_a4633499e0f197ac855f56473fc9fb291}{vg\_get\_vres}}());}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00146}00146\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00147}00147\ \ \ \}}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00148}00148\ \ \ \mbox{\hyperlink{graphics_8c_a75992379c4d2d7db98670d5fd3cee7aa}{vg\_draw\_image32}}(0,\ 0,\ \mbox{\hyperlink{structmenu}{menu}}-\/>\mbox{\hyperlink{structmenu_a502f1077adb8d0ca4a8023ff2377f797}{sprites}}[\mbox{\hyperlink{structmenu}{menu}}-\/>\mbox{\hyperlink{structmenu_a9c5d43a090538d45b4a9d93a21684d76}{menu\_status}}]);}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00149}00149\ }
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00150}00150\ \ \ \textcolor{comment}{//\ Draw\ high\ score\ in\ top\ right\ corner}}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00151}00151\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ \mbox{\hyperlink{main__controller_8c_a65f8af65b9bf570e74231a8c59806628}{high\_score}}\ =\ \mbox{\hyperlink{main__controller_8c_a69ae5238712eef3b6d7a5aa88e52c124}{get\_high\_score}}();}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00152}00152\ \ \ \textcolor{keywordtype}{int}\ minutes\ =\ \mbox{\hyperlink{main__controller_8c_a65f8af65b9bf570e74231a8c59806628}{high\_score}}\ /\ 60;}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00153}00153\ \ \ \textcolor{keywordtype}{int}\ seconds\ =\ \mbox{\hyperlink{main__controller_8c_a65f8af65b9bf570e74231a8c59806628}{high\_score}}\ \%\ 60;}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00154}00154\ \ \ }
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00155}00155\ \ \ \textcolor{comment}{//\ Calculate\ total\ width\ of\ the\ PR\ display}}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00156}00156\ \ \ \textcolor{keywordtype}{int}\ total\_width\ =\ \mbox{\hyperlink{static__images_8c_a63597462638a3efd34eea95ca248f734}{pr\_img}}.width\ +\ \mbox{\hyperlink{static__images_8c_a4f1167c1447e51cbbeb74999c2d2deb2}{number\_sprites}}[0].width\ *\ 4\ +\ \mbox{\hyperlink{static__images_8c_ae6e4bac9d2ef5599afcb5371a5413a01}{two\_points}}.width;}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00157}00157\ \ \ \textcolor{keywordtype}{int}\ start\_x\ =\ \mbox{\hyperlink{graphics_8c_aa4a211ebfc5c87a0072eaf9bd03e3a56}{vg\_get\_hres}}()\ -\/\ total\_width\ +\ 15;\ \textcolor{comment}{//\ 10\ pixels\ padding\ from\ right\ edge}}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00158}00158\ \ \ }
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00159}00159\ \ \ \textcolor{comment}{//\ Draw\ "{}PR-\/"{}\ text}}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00160}00160\ \ \ \mbox{\hyperlink{graphics_8c_a75992379c4d2d7db98670d5fd3cee7aa}{vg\_draw\_image32}}(start\_x,\ 10,\ \&\mbox{\hyperlink{static__images_8c_a63597462638a3efd34eea95ca248f734}{pr\_img}});}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00161}00161\ \ \ }
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00162}00162\ \ \ \textcolor{comment}{//\ Draw\ minutes}}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00163}00163\ \ \ \mbox{\hyperlink{graphics_8c_a75992379c4d2d7db98670d5fd3cee7aa}{vg\_draw\_image32}}(start\_x\ +\ \mbox{\hyperlink{static__images_8c_a63597462638a3efd34eea95ca248f734}{pr\_img}}.width,\ 10,\ \&\mbox{\hyperlink{static__images_8c_a4f1167c1447e51cbbeb74999c2d2deb2}{number\_sprites}}[minutes\ /\ 10]);}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00164}00164\ \ \ \mbox{\hyperlink{graphics_8c_a75992379c4d2d7db98670d5fd3cee7aa}{vg\_draw\_image32}}(start\_x\ +\ \mbox{\hyperlink{static__images_8c_a63597462638a3efd34eea95ca248f734}{pr\_img}}.width\ +\ \mbox{\hyperlink{static__images_8c_a4f1167c1447e51cbbeb74999c2d2deb2}{number\_sprites}}[0].width\ -\/\ 10,\ 10,\ \&\mbox{\hyperlink{static__images_8c_a4f1167c1447e51cbbeb74999c2d2deb2}{number\_sprites}}[minutes\ \%\ 10]);}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00165}00165\ \ \ }
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00166}00166\ \ \ \textcolor{comment}{//\ Draw\ the\ "{}:"{}}}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00167}00167\ \ \ \mbox{\hyperlink{graphics_8c_a75992379c4d2d7db98670d5fd3cee7aa}{vg\_draw\_image32}}(start\_x\ +\ \mbox{\hyperlink{static__images_8c_a63597462638a3efd34eea95ca248f734}{pr\_img}}.width\ +\ \mbox{\hyperlink{static__images_8c_a4f1167c1447e51cbbeb74999c2d2deb2}{number\_sprites}}[0].width\ *\ 2\ -\/\ 13,\ 10,\ \&\mbox{\hyperlink{static__images_8c_ae6e4bac9d2ef5599afcb5371a5413a01}{two\_points}});}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00168}00168\ \ \ }
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00169}00169\ \ \ \textcolor{comment}{//\ Draw\ seconds}}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00170}00170\ \ \ \mbox{\hyperlink{graphics_8c_a75992379c4d2d7db98670d5fd3cee7aa}{vg\_draw\_image32}}(start\_x\ +\ \mbox{\hyperlink{static__images_8c_a63597462638a3efd34eea95ca248f734}{pr\_img}}.width\ +\ \mbox{\hyperlink{static__images_8c_a4f1167c1447e51cbbeb74999c2d2deb2}{number\_sprites}}[0].width\ *\ 3\ -\/\ 28,\ 10,\ \&\mbox{\hyperlink{static__images_8c_a4f1167c1447e51cbbeb74999c2d2deb2}{number\_sprites}}[seconds\ /\ 10]);}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00171}00171\ \ \ \mbox{\hyperlink{graphics_8c_a75992379c4d2d7db98670d5fd3cee7aa}{vg\_draw\_image32}}(start\_x\ +\ \mbox{\hyperlink{static__images_8c_a63597462638a3efd34eea95ca248f734}{pr\_img}}.width\ +\ \mbox{\hyperlink{static__images_8c_a4f1167c1447e51cbbeb74999c2d2deb2}{number\_sprites}}[0].width\ *\ 4\ -\/\ 38,\ 10,\ \&\mbox{\hyperlink{static__images_8c_a4f1167c1447e51cbbeb74999c2d2deb2}{number\_sprites}}[seconds\ \%\ 10]);}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00172}00172\ }
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00173}00173\ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{\Hypertarget{main__viewer_8c_source_l00174}00174\ \}}

\end{DoxyCode}
